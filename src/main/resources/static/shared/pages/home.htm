<!-- Home page -->
<div id="home-root"></div>
<script>
    app.handler(function (param) {
        const $page = $(this)
        const $root = $page.find('#home-root')
        return function (param) {
            $root.html(
                `<h1>Home page</h1>
                <a href="#!shopping">Go Shopping!</a>`
            )
            if (param === 'out') {
                $.ajax({
                    url: "logout"
                    , type: 'GET'
                    , statusCode: {
                        204: function() {
                            onSignOut()
                            window.location = "#!home"
                        }
                    }
                }).done(function (resp) {
                    if (resp && resp.status && resp.status === "success") {
                        onSignOut()
                        window.location = "#!home"
                    } else {
                        if (resp && resp.message) {
                            alert("Error: " + resp.status)
                        }
                    }
                }).fail(function () {
                    alert("Fatal error")
                })
            }
            setTimeout(preloaderHide, 500)
        }
    })
</script>